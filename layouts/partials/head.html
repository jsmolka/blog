<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="{{ if .IsHome }}{{ $.Site.Params.Description }}{{ else }}{{ .Description | plainify }}{{ end }}">
<link rel="canonical" href="{{ .Permalink }}">
<link rel="shortcut icon" href="/favicon.ico">

<title>
  {{- if .IsHome -}}
    {{- $.Site.Title -}}
  {{- else -}}
    {{- .Title -}}
  {{- end -}}
</title>

{{ $styles := slice "main.scss" }}
{{ $styles = $styles | append (.Params.scss | default slice) }}
{{ range $styles | uniq }}
  {{ partial "scss" . }}
{{ end }}

{{ with .Resources.GetMatch "index.scss" }}
  {{ $style := . }}
  {{ $style = $style | resources.ToCSS (path.Join $.Page.File.Dir "index.css") }}
  {{ if hugo.IsProduction }}
    {{ $style = $style | postCSS (dict "config" "assets/scss/postcss.config.js") }}
    {{ $style = $style | minify | fingerprint }}
  {{ end }}
  <link rel="stylesheet" href="{{ $style.RelPermalink }}">
{{ end }}

{{ partial "js-inline" "theme.js" }}

{{ $scripts := slice "main.js" }}
{{ $scripts = $scripts | append (.Params.js | default slice) }}
{{ if not hugo.IsProduction }}
  {{ $scripts = $scripts | append "prism.js" }}
{{ end }}
{{ range $scripts | uniq }}
  {{ partial "js" . }}
{{ end }}

{{ partial "preload" . }}

{{ template "_internal/opengraph.html" . }}
