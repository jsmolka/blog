@mixin post-margin {
  @apply my-5;

  &:first-child {
    @apply mt-0;
  }

  &:last-child {
    @apply mb-0;
  }
}

.post {
  @screen md {
    @apply text-justify;
  }

  @apply text-left;
  @apply hyphens-auto;
  @apply leading-[1.65];

  & > * {
    @include post-margin;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply inline;
    @apply relative;
    @apply w-fit;
    @apply mt-10;
    @apply text-left;
    @apply text-shade-0;
    @apply font-black;

    &:after {
      @apply absolute;
      @apply -left-2.5;
      @apply -bottom-0.5;
      @apply w-full;
      @apply h-3;
      @apply bg-accent;
      @apply -z-10;
      @apply rounded-sm;

      content: '';
    }

    a {
      @apply no-underline;
    }
  }

  h1 {
    @apply text-3xl;
    letter-spacing: -0.021em;
  }

  h2 {
    @apply text-2xl;
    letter-spacing: -0.019em;
  }

  h3 {
    @apply text-xl;
    letter-spacing: -0.017em;
  }

  h4 {
    @apply text-lg;
    letter-spacing: -0.014em;
  }

  h5, h6 {
    @apply text-base;
  }

  a {
    @apply underline;
  }

  ul, ol {
    @apply ml-5;
    @apply space-y-1;

    li {
      @apply pl-1;

      &:first-child {
        @apply mt-0;
      }
    }
  }

  @screen sm {
    ul, ol {
      @apply ml-10;
    }
  }

  ul {
    @apply list-none;

    li {
      @apply relative;

      &:before {
        @apply absolute;
        @apply top-2;
        @apply -left-4;
        @apply w-2;
        @apply h-2;
        @apply bg-shade-1;

        content: '';
      }
    }
  }

  ol {
    @apply list-decimal;
  }

  table {
    @apply w-full;
    @apply border-collapse;
    @apply text-left;

    th {
      @apply font-bold;
      @apply text-shade-0;
      @apply hyphens-none;
    }

    th, td {
      @apply px-3;
      @apply py-2;
      @apply border;
      @apply border-shade-3;
    }
  }

  blockquote {
    @apply space-y-2.5;
    @apply pl-5;
    @apply py-3;
    @apply italic;
    @apply border-l-4;
    @apply border-shade-1;
  }

  audio {
    @apply w-full;
  }

  a[href^="#fn:"] {
    @apply no-underline;
    @apply font-feature-tnum;

    &:before { content: '['; }
    &:after  { content: ']'; }
  }

  sup {
    @apply relative;
    @apply top-0;

    font-size: inherit;
    line-height: inherit;
  }

  .footnotes {
    a[href^="#fnref:"] {
      @apply no-underline;
    }

    hr {
      @apply my-8;
      @apply border-t-2;
      @apply border-dashed;
      @apply border-shade-3;
    }

    & > ol {
      @apply ml-5;

      & > li {
        @apply pl-5;

        counter-increment: footnote-count;

        & > * {
          @include post-margin;
        }

        &::marker {
          @apply font-feature-tnum;

          content: '[' counter(footnote-count) ']';
        }
      }
    }
  }
}
